<label for="mermiTipi">Mermi Tipi:</label>
<select id="mermiTipi" onchange="mermiTipiSecildi()">
  <option value="">Seçiniz</option>
  <option value="9mm">9 mm (BC: 0.12, Hız: 360 m/s)</option>
  <option value="45acp">.45 ACP (BC: 0.17, Hız: 260 m/s)</option>
  <option value="12ga">12 GA Saçma (BC: 0.05, Hız: 400 m/s)</option>
</select>

<label for="mermiHizi">Mermi Çıkış Hızı (m/s):</label>
<input type="number" id="mermiHizi" step="1" placeholder="Örn: 360">

<label for="ballistikKatsayi">Ballistik Katsayı (BC):</label>
<input type="number" id="ballistikKatsayi" step="0.01" placeholder="Örn: 0.12">

<button onclick="hesaplaBalistik()">Balistik Hesapla</button>

<div id="balistikSonuc"></div>

<script>
  function mermiTipiSecildi() {
    const tip = document.getElementById('mermiTipi').value;
    const hizInput = document.getElementById('mermiHizi');
    const bcInput = document.getElementById('ballistikKatsayi');

    if(tip === '9mm') {
      hizInput.value = 360;
      bcInput.value = 0.12;
    } else if(tip === '45acp') {
      hizInput.value = 260;
      bcInput.value = 0.17;
    } else if(tip === '12ga') {
      hizInput.value = 400;
      bcInput.value = 0.05;
    } else {
      hizInput.value = '';
      bcInput.value = '';
    }
  }

  function hesaplaBalistik() {
    const hiz = parseFloat(document.getElementById('mermiHizi').value);
    const bc = parseFloat(document.getElementById('ballistikKatsayi').value);

    if(isNaN(hiz) || isNaN(bc) || hiz <= 0 || bc <= 0) {
      alert('Lütfen geçerli mermi hızı ve BC değeri girin.');
      return;
    }

    // Basit düşüş ve mesafe tahmini (çok kabaca)
    // Yer çekimi: 9.81 m/s²
    // Hava direnci ve hız kaybı için basit katsayı: bc ile orantılı

    // Örnek mesafe (m)
    const mesafe = 50; // bunu kullanıcıdan da alabiliriz

    // Hız kaybı tahmini: hız azalır ama çok basit model
    const hizSon = hiz * Math.exp(-0.0001 * bc * mesafe);

    // Düşüş (y) = 0.5 * g * (t^2), t = mesafe / ortalama hız
    const ortalamaHiz = (hiz + hizSon) / 2;
    const zaman = mesafe / ortalamaHiz;

    const dusus = 0.5 * 9.81 * (zaman ** 2);

    document.getElementById('balistikSonuc').innerHTML = `
      <p><strong>Atış Mesafesi:</strong> ${mesafe} m</p>
      <p><strong>Son Hız (Tahmini):</strong> ${hizSon.toFixed(2)} m/s</p>
      <p><strong>Yaklaşık Mermi Düşüşü:</strong> ${dusus.toFixed(2)} m</p>
    `;
  }
</script>
