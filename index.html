<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Atış Mesafesi Hesaplama</title>
  <style>
    body {
      background-color: #222;
      color: #eee;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    label, select, input {
      display: block;
      margin: 10px 0 5px;
    }
    input, select {
      padding: 8px;
      width: 200px;
      background-color: #333;
      color: #fff;
      border: 1px solid #555;
      border-radius: 4px;
    }
    button {
      margin-top: 15px;
      padding: 10px 20px;
      background-color: #e68a00; /* turuncu ton */
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      background-color: #cf7a00;
    }
    #result {
      margin-top: 15px;
      font-weight: bold;
    }
    .inputs-group {
      display: none;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>Atış Mesafesi Hesaplama</h1>
  <label for="scenario">Senaryo Seçin:</label>
  <select id="scenario">
    <option value="">-- Seçiniz --</option>
    <option value="1">Zeminden İkamete</option>
    <option value="2">İkametten İkamete</option>
    <option value="3">Eğimli Zeminden İkamete</option>
    <option value="4">Düz + Eğimli Zeminden</option>
  </select>

  <!-- Senaryo 1 inputları -->
  <div id="inputs1" class="inputs-group">
    <label>Geliş Açısı (°): <input type="number" id="angle1" step="0.1"></label>
    <label>Bina Yüksekliği (m): <input type="number" id="height1" step="0.01"></label>
  </div>
  <!-- Senaryo 2 inputları -->
  <div id="inputs2" class="inputs-group">
    <label>Geliş Açısı (°): <input type="number" id="angle2" step="0.1"></label>
    <label>Hedef Bina Yüksekliği (m): <input type="number" id="heightHedef" step="0.01"></label>
    <label>Atış Yeri Yüksekliği (m): <input type="number" id="heightAtis" step="0.01"></label>
    <label>Yatay Mesafe (m): <input type="number" id="horDist2" step="0.01"></label>
  </div>
  <!-- Senaryo 3 inputları -->
  <div id="inputs3" class="inputs-group">
    <label>Geliş Açısı (°): <input type="number" id="angle3" step="0.1"></label>
    <label>Zemin Eğim Açısı (°): <input type="number" id="slope3" step="0.1"></label>
    <label>Bina Yüksekliği (m): <input type="number" id="height3" step="0.01"></label>
  </div>
  <!-- Senaryo 4 inputları -->
  <div id="inputs4" class="inputs-group">
    <label>Geliş Açısı (°): <input type="number" id="angle4" step="0.1"></label>
    <label>Zemin Eğim Açısı (°): <input type="number" id="slope4" step="0.1"></label>
    <label>Düz Zemin Mesafesi (m): <input type="number" id="flatDist4" step="0.01"></label>
    <label>Bina Yüksekliği (m): <input type="number" id="height4" step="0.01"></label>
  </div>

  <button id="calculate">Hesapla</button>
  <div id="result"></div>

  <script>
    // Senaryo seçiminde ilgili giriş grubunu göster
    document.getElementById('scenario').addEventListener('change', function() {
      for (let i = 1; i <= 4; i++) {
        document.getElementById('inputs' + i).style.display = 'none';
      }
      const sel = this.value;
      if (sel >= 1 && sel <= 4) {
        document.getElementById('inputs' + sel).style.display = 'block';
        document.getElementById('result').innerText = '';
      }
    });

    // Hesapla butonu
    document.getElementById('calculate').addEventListener('click', function() {
      const resDiv = document.getElementById('result');
      resDiv.style.color = '#eee';
      let mesafe = 0, text = '', angle, h, h2, d, slope, numerator, denominator, a, b;
      const scenario = document.getElementById('scenario').value;

      if (scenario === "1") {
        angle = parseFloat(document.getElementById('angle1').value);
        h = parseFloat(document.getElementById('height1').value);
        if (isNaN(angle) || isNaN(h) || angle <= 0) {
          resDiv.style.color = 'orange';
          resDiv.innerText = 'Lütfen geçerli değerler girin.';
          return;
        }
        // Mesafe = yükseklik / tan(açı)
        mesafe = h / Math.tan(angle * Math.PI/180);
        text = `Tahmini mesafe: ${mesafe.toFixed(2).replace('.', ',')} m`;
      }
      else if (scenario === "2") {
        angle = parseFloat(document.getElementById('angle2').value);
        h = parseFloat(document.getElementById('heightHedef').value);
        h2 = parseFloat(document.getElementById('heightAtis').value);
        d = parseFloat(document.getElementById('horDist2').value);
        if (isNaN(angle) || isNaN(h) || isNaN(h2) || isNaN(d) || angle <= 0) {
          resDiv.style.color = 'orange';
          resDiv.innerText = 'Lütfen geçerli değerler girin.';
          return;
        }
        const diff = Math.abs(h - h2);
        // Tutarlılık kontrolü: tan(açı) yaklaşık diff/d ?
        if (Math.abs(Math.tan(angle * Math.PI/180) - diff/d) > 0.0001) {
          resDiv.style.color = 'orange';
          resDiv.innerText = 'Verilen açı ve değerler tutarsız.';
          return;
        }
        // Atış mesafesi (yatay veya doğrusal). Burada yatay mesafe = diff/tan(θ)
        mesafe = diff / Math.tan(angle * Math.PI/180);
        text = `Tahmini mesafe: ${mesafe.toFixed(2).replace('.', ',')} m`;
      }
      else if (scenario === "3") {
        angle = parseFloat(document.getElementById('angle3').value);
        slope = parseFloat(document.getElementById('slope3').value);
        h = parseFloat(document.getElementById('height3').value);
        if (isNaN(angle) || isNaN(slope) || isNaN(h) || angle <= 0 || slope <= 0) {
          resDiv.style.color = 'orange';
          resDiv.innerText = 'Lütfen geçerli değerler girin.';
          return;
        }
        const tAngle = Math.tan(angle * Math.PI/180);
        const tSlope = Math.tan(slope * Math.PI/180);
        if (tAngle <= tSlope) {
          resDiv.style.color = 'orange';
          resDiv.innerText = 'Atış açısı eğimden büyük olmalıdır.';
          return;
        }
        // a = h / (tanθ - tanα)
        a = h / (tAngle - tSlope);
        // Mesafe = a / cos(α)
        b = a / Math.cos(slope * Math.PI/180);
        mesafe = b;
        text = `Tahmini mesafe: ${mesafe.toFixed(2).replace('.', ',')} m`;
      }
      else if (scenario === "4") {
        angle = parseFloat(document.getElementById('angle4').value);
        slope = parseFloat(document.getElementById('slope4').value);
        d = parseFloat(document.getElementById('flatDist4').value);
        h = parseFloat(document.getElementById('height4').value);
        if (isNaN(angle) || isNaN(slope) || isNaN(d) || isNaN(h) || angle <= 0 || slope <= 0) {
          resDiv.style.color = 'orange';
          resDiv.innerText = 'Lütfen geçerli değerler girin.';
          return;
        }
        const tAngle = Math.tan(angle * Math.PI/180);
        const tSlope = Math.tan(slope * Math.PI/180);
        numerator = h - tAngle * d;
        denominator = tAngle - tSlope;
        if (denominator <= 0 || numerator <= 0) {
          resDiv.style.color = 'orange';
          resDiv.innerText = 'Verilen değerlerle anlamlı çözüm yok.';
          return;
        }
        a = numerator / denominator;
        // Mesafe = a / cos(α) (düz zemin bitiminden)
        b = a / Math.cos(slope * Math.PI/180);
        mesafe = b;
        text = `Tahmini mesafe (düz zeminden sonra): ${mesafe.toFixed(2).replace('.', ',')} m`;
      }
      else {
        resDiv.style.color = 'orange';
        resDiv.innerText = 'Lütfen bir senaryo seçin.';
        return;
      }

      resDiv.style.color = '#eee';
      resDiv.innerText = text;
    });
  </script>
</body>
</html>
